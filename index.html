<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jazz And The Sort</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background: #fdf6f0;
      color: #3e3e3e;
      max-width: 700px;
      margin: auto;
      padding: 2rem;
    }
    h1, h2 {
      color: #8b5e3c;
    }
    .product {
      background: #fff8f4;
      border: 1px solid #ecdac9;
      border-radius: 12px;
      padding: 1rem;
      margin-bottom: 1rem;
    }
    button {
      background: #e6c5a8;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      color: #fff;
      font-weight: bold;
    }
    button:hover {
      background: #d5b295;
    }
    .cart {
      background: #fff2e5;
      border-radius: 10px;
      padding: 1rem;
      margin-top: 2rem;
      font-family: monospace;
    }
    .footer {
      text-align: center;
      font-size: 0.9rem;
      color: #7c6a5c;
      margin-top: 2rem;
    }
  </style>
</head>
<body>

<p>
  <label for="currency">Pay with:</label>
  <select id="currency" onchange="updateCart()">
    <option value="xmr">XMR</option>
    <option value="btc">BTC</option>
  </select>
</p>
<p><strong>Current Price:</strong> 
  <span id="crypto-price">Loading...</span> USD
</p>

  <h1>üåø My Cozy Monero Shop</h1>
  <p>Select items below. Prices are in USD, and the cart will convert your total to XMR using the live exchange rate.</p>
  <p><strong>Current XMR Price:</strong> <span id="xmr-price">Loading...</span> USD</p>

  <div class="product">
    <h2>üçØ Herbal Honey</h2>
    <p>$12.00</p>
    <button onclick="addToCart('Herbal Honey', 12.00)">Add to Cart</button>
  </div>

  <div class="product">
    <h2>üìú Custom Rune Scroll</h2>
    <p>$18.00</p>
    <button onclick="addToCart('Rune Scroll', 18.00)">Add to Cart</button>
  </div>

  <div class="product">
    <h2>üïØ Beeswax Spell Candle</h2>
    <p>$8.00</p>
    <button onclick="addToCart('Spell Candle', 8.00)">Add to Cart</button>
  </div>

  <div class="cart" id="cart">
    <h2>Your Cart</h2>
    <button onclick="clearCart()" style="margin-bottom: 1rem;">üóëÔ∏è Clear Cart</button>
    <ul id="cart-items"></ul>
    <p><strong>Total:</strong> <span id="total-usd">0.00</span> USD</p>
    <p><strong>Pay:</strong> <span id="total-xmr">0.000</span> XMR</p>
    <div>
      <p><strong>Send payment to:</strong><br>
      8Bxx...yourMoneroAddressHere...gA3</p>
      <p><strong>Include this message:</strong><br>
      <code id="order-note">yourname@protonmail.com</code></p>
    </div>
  </div>

  <div class="footer">
    üì® After paying, email <strong>yourname@protonmail.com</strong> with your TXID.<br>
    Thank you for supporting handmade magick!
  </div>

  <script>
  let cart = [];
  let prices = {
    xmr: 0,
    btc: 0
  };

  // Your wallet addresses for each currency
  const paymentAddresses = {
    xmr: "8Bxx...yourMoneroAddressHere...gA3",
    btc: "1YourBitcoinAddressHere1234567890"
  };

  async function getPrices() {
    const res = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=monero,bitcoin&vs_currencies=usd');
    const data = await res.json();
    prices.xmr = data.monero.usd;
    prices.btc = data.bitcoin.usd;
    updateCart();
  }

  function addToCart(name, priceUsd) {
    cart.push({ name, priceUsd });
    updateCart();
  }

  function clearCart() {
    cart = [];
    updateCart();
  }

  function updateCart() {
    const cartItems = document.getElementById('cart-items');
    const totalUsdField = document.getElementById('total-usd');
    const totalCryptoField = document.getElementById('total-xmr');
    const noteField = document.getElementById('order-note');
    const currency = document.getElementById('currency').value;
    const cryptoPrice = prices[currency];

    // Update crypto price label
    document.getElementById('crypto-price').textContent = `$${cryptoPrice.toFixed(2)} (${currency.toUpperCase()})`;

    cartItems.innerHTML = '';
    let totalUsd = 0;
    let note = 'Order: ';

    cart.forEach((item, i) => {
      const li = document.createElement('li');
      li.textContent = `${item.name} - $${item.priceUsd.toFixed(2)}`;
      cartItems.appendChild(li);
      totalUsd += item.priceUsd;
      note += `${item.name}${i < cart.length - 1 ? ', ' : ''}`;
    });

    const totalCrypto = cryptoPrice > 0 ? (totalUsd / cryptoPrice) : 0;
    totalUsdField.textContent = totalUsd.toFixed(2);
    totalCryptoField.textContent = `${totalCrypto.toFixed(5)} ${currency.toUpperCase()}`;
    noteField.textContent = `order: ${note} yourname@protonmail.com`;

    // Update payment address dynamically
    const paymentText = document.querySelector('.cart div p strong + br').parentNode; // the <div> containing payment info
    paymentText.innerHTML = `
      <p><strong>Send payment to:</strong><br>${paymentAddresses[currency]}</p>
      <p><strong>Include this message:</strong><br><code id="order-note">${noteField.textContent}</code></p>
    `;
  }

  // Initialize prices and cart display
  getPrices();

  // Attach addToCart and clearCart functions to window for buttons to work
  window.addToCart = addToCart;
  window.clearCart = clearCart;
</script>


</body>
</html>

